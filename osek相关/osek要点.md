# OSEK-OS要点

用形象化的语言，少量的文字描述总结OSEK-OS，AUTOSAR-OS 的知识要点。

 

二、内容：

主频的心跳，

驱动几个定时器的脉搏，

产生几个软硬件计数器的滴答。

一个计数器拉响了几个警报，

每个周期的轮回都激活一个任务和事件。

一个计数器启动了一个调度表，

每个超时的节点都激活若干任务和事件。

 

我是一个任务，

因为我优先级更高，所以抢占。

因为我们优先级平等，所以排队。

我若优先级最高，谁也别抢，我是山顶。

我若在访问资源，最好别抢，除非高过我的天花板。

我不想被别人抢，我要锁住调度器。

但我还是被抢，因为遇到了中断。

 

我是基础任务，

别人叫醒了我，我干完事情自己睡去。

除非有人要做更重要的事情，我只好让出工作台，坐在旁边（Ready）。

 

我是扩展任务，

我在干活时需要等一个事件，我只好让出工作台，假装睡觉（Wait）。

 

我是一个事件，

我有我的主人扩展任务。

请不要设置一个不属于你的事件，

这注定是不被察觉的失败。

请不要等待一个不属于你的事件，

那样只是白等止步不前。

一个高优先级任务等待事件，让出CPU给我的同伴

一个低优先级任务设置事件，再让CPU给我的主人

让我们一起同步。

 

我是一个资源，

一个任务开始访问我，把它的权限上升到天花板，

这个任务结束访问我，把它的权限恢复原状，

让优先级避免反转，

让任务等待避免死锁。

 

我是一个自旋锁，

我为不同核上共享资源而用，

在一个核上访问资源前先上锁，

那样另一个核上在访问资源时就会自旋等待。

相同的核上不要使用，那样起不到作用。

 

我是一个栈，

每个抢占的任务都要先来这里，

堆一捆柴火，

后来者居上，居上者优先，优先者早退。

请不要堆得太高，

那样有溢出风险。

 

我是一类中断，我从哪里来又回那里去。

我是二类中断，我走之后要求重新调度。

 

我是一个调度器，

在需要的时候，

我会更新就绪表，

取出优先级更高的任务，

切换运行。

---